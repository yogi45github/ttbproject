{% use 'search/searchTable.twig' %}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="yqservice/assets/css/{{ theme }}.css?t={{ version.revisionAt }}" media="screen" rel="stylesheet"
          type="text/css">
    <link href="yqservice/assets/colorbox/colorbox.css" media="screen" rel="stylesheet" type="text/css">
    <link href="yqservice/assets/css/qtcreator_light.css" media="screen" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css" media="screen" rel="stylesheet" type="text/css">

    <script src="yqservice/assets/js/jquery.js" type="text/javascript"></script>
    <script src="yqservice/assets/js/jquery.tooltip.js" type="text/javascript"></script>
    <script src="yqservice/assets/js/yqservice.js?t={{ version.revisionAt }}" type="text/javascript"></script>
    <script src="yqservice/assets/js/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="yqservice/assets/js/dragscrollable.js" type="text/javascript"></script>
    <script src="yqservice/assets/js/highlight.pack.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js" type="text/javascript"></script>
    <script src="yqservice/assets/colorbox/jquery.colorbox.js" type="text/javascript"></script>
</head>
<body data-mark="{{ additional.user or additional.showOemsToGuest ? 1 : 0 }}">
<div class="content-wrapper">
    {% if task in availablePages and not additional.useEnvParams %}
        <div class="language-panel" style="display: none;">
            <div>
                <div class="header-logo">
                    <a href="index.php">
                        <span class="letter">YQ</span>
                        <span class="text">Service</span> <span class="copyright">Â©</span>
                    </a>
                </div>
                <select class="select" name="language" id="language" autocomplete="off">
                    {% for label, code in languages %}
                        <option value="{{ code }}" {{ code == current ? 'selected="selected"' : '' }}>{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <script type="text/javascript">
                jQuery(document).ready(function () {
                    var cLang = '{{ current }}';
                    jQuery('#language option[value="' + cLang + '"]').attr('selected', 'true');
                });
            </script>
            {% if additional.user %}
                {% if not additional.useEnvParams %}
                    <div>
                        <form action="{{ createUrl('login', 'logout') }}" method="post">
                            <input type="hidden" name="user[backurl]" value="">
                            <span class="username">{{ additional.username }}</span>
                            <button type="submit" class="logout-button"><?xml version="1.0" encoding="iso-8859-1"?>
                                <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Layer_1" x="0px" y="0px"
                                     viewBox="0 0 512 512" style="enable-background:new 0 0 24 24;" xml:space="preserve"
                                     width="24" height="24">
                            <g>
                                <g>
                                    <path d="M358.401,192V12.8c0-7.066-5.734-12.8-12.8-12.8h-332.8c-7.066,0-12.8,5.734-12.8,12.8v486.4    c0,7.066,5.734,12.8,12.8,12.8h332.8c7.066,0,12.8-5.734,12.8-12.8V320h-25.6v166.4h-307.2V25.6h307.2V192H358.401z"
                                          fill="#FFFFFF"/>
                                </g>
                            </g>
                                    <g>
                                        <g>
                                            <path d="M508.161,246.844l-74.931-76.595c-4.941-5.06-13.047-5.146-18.099-0.205c-5.052,4.941-5.146,13.056-0.205,18.099    l53.854,55.057H193.673c-7.066,0-12.8,5.734-12.8,12.8c0,7.066,5.734,12.8,12.8,12.8h275.098l-53.854,55.057    c-4.941,5.043-4.847,13.158,0.205,18.099c5.06,4.941,13.158,4.855,18.099-0.205l75.128-76.8    C513.289,259.9,513.204,251.785,508.161,246.844z"
                                                  fill="#FFFFFF"/>
                                        </g>
                                    </g>
                        </svg>
                            </button>
                        </form>
                    </div>
                {% endif %}
            {% elseif additional.amUser and isAftermarket %}
                <div>
                    <form action="{{ createUrl('login', 'logout') }}" method="post">
                        <input type="hidden" name="user[backurl]" value="">
                        <span class="username">{{ additional.am_username }}</span>
                        <button type="submit" class="logout-button"><?xml version="1.0" encoding="iso-8859-1"?>
                            <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Layer_1" x="0px" y="0px"
                                 viewBox="0 0 512 512" style="enable-background:new 0 0 24 24;" xml:space="preserve"
                                 width="24" height="24">
                            <g>
                                <g>
                                    <path d="M358.401,192V12.8c0-7.066-5.734-12.8-12.8-12.8h-332.8c-7.066,0-12.8,5.734-12.8,12.8v486.4    c0,7.066,5.734,12.8,12.8,12.8h332.8c7.066,0,12.8-5.734,12.8-12.8V320h-25.6v166.4h-307.2V25.6h307.2V192H358.401z"
                                          fill="#FFFFFF"/>
                                </g>
                            </g>
                                <g>
                                    <g>
                                        <path d="M508.161,246.844l-74.931-76.595c-4.941-5.06-13.047-5.146-18.099-0.205c-5.052,4.941-5.146,13.056-0.205,18.099    l53.854,55.057H193.673c-7.066,0-12.8,5.734-12.8,12.8c0,7.066,5.734,12.8,12.8,12.8h275.098l-53.854,55.057    c-4.941,5.043-4.847,13.158,0.205,18.099c5.06,4.941,13.158,4.855,18.099-0.205l75.128-76.8    C513.289,259.9,513.204,251.785,508.161,246.844z"
                                              fill="#FFFFFF"/>
                                    </g>
                                </g>
                        </svg>
                        </button>
                    </form>
                </div>
            {% else %}
                <div>
                    <button id="login-button" class="login-button">
                        <span class="sign-in">{{ 'LOGIN'|t }}</span>
                        <?xml version="1.0" encoding="iso-8859-1"?>
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" x="0px" y="0px"
                             viewBox="0 0 512 512" style="enable-background:new 0 0 24 24;" xml:space="preserve"
                             width="24" height="24">
                        <g>
                            <g>
                                <path d="M437.02,330.98c-27.883-27.882-61.071-48.523-97.281-61.018C378.521,243.251,404,198.548,404,148    C404,66.393,337.607,0,256,0S108,66.393,108,148c0,50.548,25.479,95.251,64.262,121.962    c-36.21,12.495-69.398,33.136-97.281,61.018C26.629,379.333,0,443.62,0,512h40c0-119.103,96.897-216,216-216s216,96.897,216,216    h40C512,443.62,485.371,379.333,437.02,330.98z M256,256c-59.551,0-108-48.448-108-108S196.449,40,256,40    c59.551,0,108,48.448,108,108S315.551,256,256,256z"
                                      fill="#FFFFFF"/>
                            </g>
                        </g>
                        </svg>
                    </button>
                    <div id="login-form-content" class="hidden">
                        <div class="login-container">
                            {% spaceless %}
                                <form action="{{ createUrl('login', 'login') }}" class="login-form with-validate"
                                      method="post">
                                    <div class="login-description">
                                        {{ isAftermarket ? 'GET_LOGIN_AM'|t|raw : 'GET_LOGIN'|t|raw }}
                                    </div>
                                    <div>
                                        <input type="text" class="required" placeholder="{{ 'USERNAME'|t }}"
                                               name="user[login]">
                                    </div>
                                    <div>
                                        <input type="password" class="required" placeholder="{{ 'PASSWORD'|t }}"
                                               name="user[password]">
                                    </div>
                                    <div>
                                        <input type="hidden" name="user[backurl]" value="">
                                        <button type="submit" style="width: 100%" class="button">{{ 'LOGIN'|t }}</button>
                                    </div>
                                </form>
                            {% endspaceless %}
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}

    <script type="text/javascript">
        jQuery(document).ready(function () {
            jQuery('input[name="user[backurl]"]').val(window.location.href);

            if (window.location.href.indexOf('hideErrorFromUrl=1')) {
                window.history.replaceState('', '', removeParam('error', removeParam('hideErrorFromUrl', window.location.href)))
            }
        });

        function removeParam(key, sourceURL) {
            var rtn = sourceURL.split("?")[0],
                param,
                params_arr = [],
                queryString = (sourceURL.indexOf("?") !== -1) ? sourceURL.split("?")[1] : "";
            if (queryString !== "") {
                params_arr = queryString.split("&");
                for (var i = params_arr.length - 1; i >= 0; i -= 1) {
                    param = params_arr[i].split("=")[0];
                    if (param === key) {
                        params_arr.splice(i, 1);
                    }
                }
                rtn = rtn + "?" + params_arr.join("&");
            }
            return rtn;
        }
    </script>
{% if not additional.authPage and not isAftermarket and task %}
    <div style="display:none">{{ block('searchTable') }}</div>
{% endif %}
    <div class="container {{ not task ? 'start-page' : '' }}">